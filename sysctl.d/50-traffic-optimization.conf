# Traffic shaping and QoS optimization
# Optimizes packet scheduling and queue management

# Fair Queueing (already in BBR config, but adding for completeness)
# net.core.default_qdisc = fq

# Packet scheduling
net.ipv4.tcp_slow_start_after_idle = 0
net.ipv4.tcp_no_metrics_save = 1

# TCP window scaling
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_timestamps = 1
net.ipv4.tcp_sack = 1
net.ipv4.tcp_fack = 1

# TCP Fast Open (for compatible clients/servers)
net.ipv4.tcp_fastopen = 3

# Increase local port range
net.ipv4.ip_local_port_range = 1024 65535

# Reduce TIME_WAIT sockets
net.ipv4.tcp_max_orphans = 65536

# Optimize for low latency
net.ipv4.tcp_low_latency = 1

# ECN (Explicit Congestion Notification)
net.ipv4.tcp_ecn = 1
